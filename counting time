import threading
import time
import tkinter as tk

# from win10toast import ToastNotifier
PURPLE = "#EB455F"
LPURPLE = '#E384FF'


class CountdownTimer:
    def __init__(self):
        self.root = tk.Tk()
        self.root.geometry("660x420")
        self.root.title("Countdown Timer")
        self.root.config(padx=50, pady=50, bg=PURPLE)

        self.start_button = tk.Button(self.root, font=('Helvetica', 20), text="Start", command=self.start_thread)
        self.start_button.grid(row=2, column=0, padx=15, pady=15)

        self.stop_button = tk.Button(self.root, font=('Helvetica', 20), text="Stop", command=self.stop)
        self.stop_button.grid(row=2, column=2, padx=15, pady=15)

        self.time_label = tk.Label(self.root, font=('Helvetica', 40), text="Time: 00:00", background=LPURPLE)
        self.time_label.grid(row=1, column=1, padx=5, pady=5)

        self.stop_loop = False
        self.root.mainloop()

    def start_thread(self):
        t = threading.Thread(target=self.start)
        t.start()

    def start(self):
        self.stop_loop = False
        minutes, seconds = 25, 0  # For Long Break, Short Break and Working time I can add conditions

        full_seconds = minutes * 60 + seconds

        while full_seconds > 0 and not self.stop_loop:
            full_seconds -= 1

            minutes, seconds = divmod(full_seconds, 60)
            self.time_label.config(text=f"Time: {minutes:02d}:{seconds:02d}")
            self.root.update()
            time.sleep(1)
        # If time cound to 0
        if not self.stop_loop:
            toast = ToastNotifier()
            tost.show_toast('CountdownTimer', 'Time is up!', duration=10)

    def stop(self):
        self.stop_loop = True
        self.time_label.config(text="Time:00:00")


CountdownTimer()
